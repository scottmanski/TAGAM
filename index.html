<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Utilize word embedding matrices for Statistical analysis • TAGAM</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Utilize word embedding matrices for Statistical analysis">
<meta property="og:description" content="The goal of TAGAM is to streamline the use of word embeddings in text analysis. The package is designed to take raw textual descriptions and transform the information for use in your analysis. The package also includes functions for running a three stage generalized additive model framework.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">TAGAM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/NOAA-Example.html">NOAA Storm Event Analysis</a>
    </li>
    <li>
      <a href="articles/Spam-Example.html">SMS Spam Filtering Example</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/scottmanski/TAGAM/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="tagam-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#tagam-" class="anchor"></a>TAGAM <img src="reference/figures/logo.png" align="right" alt="" width="120">
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of TAGAM is to streamline the use of word embeddings in text analysis. The package is designed to take raw textual descriptions and transform the information for use in your analysis. The package also includes functions for running a three stage generalized additive model framework.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version from <a href="https://github.com/scottmanski/TAGAM">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"scottmanski/TAGAM"</span>)</pre></div>
</div>
<div id="text-conversion" class="section level2">
<h2 class="hasAnchor">
<a href="#text-conversion" class="anchor"></a>Text Conversion</h2>
<p>To convert the words to vectors, we must download and format the word embeddings. Here, we choose to use the 300 dimensional <a href="https://nlp.stanford.edu/projects/glove/">GloVe</a> word embeddings. The <code><a href="reference/formatWordEmbeddings.html">TAGAM::formatWordEmbeddings</a></code> function takes the raw word embeddings matrix and converts them into a named list, where each entry is a numeric vector of length 300. For example, we would use <code>word_embeddings["the"]</code> to extract the numeric vector for the word <em>the</em>.</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">TAGAM</span>)
<span class="no">temp</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span>()
<span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span>(<span class="st">"http://nlp.stanford.edu/data/wordvecs/glove.6B.zip"</span>, <span class="no">temp</span>)

<span class="no">embedding_matrix</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/connections.html">unz</a></span>(<span class="no">temp</span>, <span class="st">"glove.6B.300d.txt"</span>), <span class="kw">quote</span> <span class="kw">=</span> <span class="st">""</span>,
                               <span class="kw">comment.char</span> <span class="kw">=</span> <span class="st">""</span>, <span class="kw">stringsAsFactors</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
<span class="no">word_embeddings</span> <span class="kw">&lt;-</span> <span class="kw pkg">TAGAM</span><span class="kw ns">::</span><span class="fu"><a href="reference/formatWordEmbeddings.html">formatWordEmbeddings</a></span>(<span class="no">embedding_matrix</span>, <span class="kw">normalize</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
</div>
<div id="cosine-similarity" class="section level2">
<h2 class="hasAnchor">
<a href="#cosine-similarity" class="anchor"></a>Cosine Similarity</h2>
<p>To measure the similarity between two words, we use the cosine similarity between the vector representations of the words. That is, for two words with vector representations <span class="math inline"><strong>a</strong></span> and <span class="math inline"><strong>b</strong></span>, respectively, the cosine similarity is defined as, <br><span class="math display">$$\textrm{sim}_{\textrm{cos}} ({\bf a}, {\bf b}) = \frac{{\bf a}\cdot {\bf b}}{\lVert {\bf a}\lVert_2\cdot\lVert{\bf b}\lVert_2}.$$</span><br></p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="no">word_embeddings</span> <span class="kw">&lt;-</span> <span class="kw pkg">TAGAM</span><span class="kw ns">::</span><span class="fu"><a href="reference/formatWordEmbeddings.html">formatWordEmbeddings</a></span>(<span class="no">embedding_matrix_example</span>, <span class="kw">normalize</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">#&gt; Normalizing word embeddings.</span>
<span class="co">#&gt; Formatting word embeddings.</span>

<span class="no">a</span> <span class="kw">&lt;-</span> <span class="st">"statistic"</span>
<span class="no">b</span> <span class="kw">&lt;-</span> <span class="st">"statistics"</span>
<span class="kw pkg">TAGAM</span><span class="kw ns">::</span><span class="fu"><a href="reference/cs.html">cs</a></span>(<span class="no">a</span>, <span class="no">b</span>, <span class="no">word_embeddings</span>)
<span class="co">#&gt;            statistic</span>
<span class="co">#&gt; statistics 0.6047858</span></pre></div>
<p>For a given phrase, let <span class="math inline"><em>D</em> = (<strong>b</strong><sub>1</sub>, ..., <strong>b</strong><sub><em>S</em></sub>)</span> where each <span class="math inline"><strong>b</strong><sub><em>i</em></sub></span>, <span class="math inline"><em>i</em> ∈ {1, ..., <em>S</em>}</span> is a word in the phrase. Then define the cosine similarity between a word <span class="math inline"><strong>a</strong></span> and a phrase <span class="math inline"><em>D</em></span> as <br><span class="math display">$$\textrm{sim}_{\textrm{cos}} ({\bf a}, D) = \underset{s=1,...,S}{\max}\left\{ \textrm{sim}_{\textrm{cos}} ({\bf a}, {\bf b}_s)\right\}.$$</span><br></p>
<p>In this way, we construct a matrix of cosine similarities <span class="math inline"><strong>X</strong><sub><em>n</em> × <em>p</em><sub><em>n</em></sub></sub></span> where <span class="math inline"><em>n</em></span> is the number of observations, <span class="math inline"><em>p</em><sub><em>n</em></sub></span> is the number of unique words used. Let <span class="math inline"><em>W</em></span> be the vector of unique words with length <span class="math inline"><em>p</em><sub><em>n</em></sub></span>, and let <span class="math inline"><strong>D</strong></span> be the list of descriptions with length <span class="math inline"><em>n</em></span>, where each element in the list is a vector <span class="math inline"><em>D</em><sub><em>i</em></sub></span> containing the words used in description <span class="math inline"><em>i</em></span>. Then <br><span class="math display"><em>X</em><sub><em>i</em><em>j</em></sub> = sim<sub>cos</sub>(<em>W</em><sub><em>j</em></sub>, <em>D</em><sub><em>i</em></sub>)    for    <em>i</em> ∈ {1, ..., <em>n</em>}, <em>j</em> ∈ {1, ..., <em>p</em><sub><em>n</em></sub>}.</span><br></p>
<p>Each value in the matrix is now continuous and restricted to <span class="math inline">[ − 1, 1]</span>.</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidytext</span>)
<span class="no">D</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Statistics is great!"</span>,
       <span class="st">"My dog is fluffy"</span>,
       <span class="st">"What is your favorite class?"</span>)
<span class="no">x</span> <span class="kw">&lt;-</span> <span class="fu">tibble</span>(<span class="kw">line</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">D</span>), <span class="kw">text</span> <span class="kw">=</span> <span class="no">D</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span>(<span class="no">word</span>, <span class="no">text</span>)

<span class="no">w</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"statistics"</span>, <span class="st">"dog"</span>, <span class="st">"fluffy"</span>, <span class="st">"favorite"</span>, <span class="st">"class"</span>)

<span class="kw pkg">TAGAM</span><span class="kw ns">::</span><span class="fu"><a href="reference/cs.matrix.html">cs.matrix</a></span>(<span class="no">x</span>, <span class="kw">words</span> <span class="kw">=</span> <span class="no">w</span>, <span class="no">word_embeddings</span>)
<span class="co">#&gt; 3 x 5 Matrix of class "dgeMatrix"</span>
<span class="co">#&gt;      statistics       dog     fluffy  favorite     class</span>
<span class="co">#&gt; [1,]  1.0000000 0.2670640 0.01818783 0.3341204 0.2700382</span>
<span class="co">#&gt; [2,]  0.1796945 1.0000000 1.00000000 0.4486072 0.2700382</span>
<span class="co">#&gt; [3,]  0.2170957 0.3788118 0.13183853 1.0000000 1.0000000</span></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/scottmanski/TAGAM/">https://​github.com/​scottmanski/​TAGAM/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/scottmanski/TAGAM/issues">https://​github.com/​scottmanski/​TAGAM/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Scott Manski <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Scott Manski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
